{
    "_comment": "DO NOT EDIT: FILE GENERATED AUTOMATICALLY BY PTERODACTYL PANEL - PTERODACTYL.IO",
    "meta": {
        "version": "PTDL_v2",
        "update_url": null
    },
    "exported_at": "2023-01-15T03:21:35+01:00",
    "name": "AutoPlug Minecraft",
    "author": "major@ytmajor.com",
    "description": "AutoPlug is an automatic plugin and server updater.",
    "features": null,
    "docker_images": {
        "quay.io\/pterodactyl\/core:java-11": "quay.io\/pterodactyl\/core:java-11",
        "quay.io\/pterodactyl\/core:java": "quay.io\/pterodactyl\/core:java"
    },
    "file_denylist": [],
    "startup": "sh start.sh {{SERVER_MEMORY}} {{AUTOPLUG_JARFILE}}",
    "config": {
        "files": "{\r\n    \"server.properties\": {\r\n        \"parser\": \"file\",\r\n        \"find\": {\r\n            \"server-ip=\": \"server-ip=0.0.0.0\",\r\n            \"server-port=25565\": \"server-port={{server.build.default.port}}\"\r\n        },\r\n        \"autoplug\/general.yml\": {\r\n            \"parser\": \"file\",\r\n            \"find\": {\r\n                \"key: INSERT_KEY_HERE\": \"key: {{server.build.env.SERVER_KEY}}\",\r\n                \"start-command: REPLACEME\": \"start-command: \\\"java {{server.build.env.JAVA_ARGS}} -jar .\/{{server.build.env.SERVER_TYPE}}.jar\\\"\",\r\n                \"target-software: MINECRAFT_SERVER\": \"target-software: MINECRAFT_SERVER\"\r\n            }\r\n        },\r\n        \"autoplug\/updater.yml\": {\r\n            \"parser\": \"file\",\r\n            \"find\": {\r\n                \"updater.server-updater.software\": \"{{server.build.env.SERVER_TYPE}}\",\r\n                \"version: SERVERVERSION\": \"version: {{server.build.env.GAME_VERSION}}\",\r\n                \"enable: true # Java\": \"enable: {{server.build.env.UPDATE_JAVA}} # Java\",\r\n                \"enable: true # Server\": \"enable: {{server.build.env.UPDATE_SERVER}} # Server\",\r\n                \"enable: true # Plugins\": \"enable: {{server.build.env.UPDATE_PLUGINS}} # Plugins\",\r\n                \"enable: true # Mods\": \"enable: {{server.build.env.UPDATE_MODS}} # Mods\",\r\n                \"enable: true # AutoPlug\": \"enable: {{server.build.env.UPDATE_AUTOPLUG}} # AutoPlug\"\r\n            }\r\n        }\r\n    }\r\n}",
        "startup": "{\r\n    \"done\": \")! For help, type \",\r\n    \"userInteraction\": [\r\n        \"Go to eula.txt for more info.\"\r\n    ]\r\n}",
        "logs": "{}",
        "stop": ".stop both"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n# AutoPlug & Game Installation Script\r\n#\r\n# Server Files: \/mnt\/server\r\ncd \/mnt\/server\r\napt update\r\napt install -y curl jq\r\napt install -y wget\r\necho -e \"Checking for AutoPlug directory.\"\r\nif [ -d \"\/autoplug\/\" ]; then\r\necho -e \"AutoPlug directory found, moving everything to \\\"Old\\\" folder.\"\r\necho -e \"Making new AutoPlug directory.\"\r\nmkdir autoplug\r\nmv -v * \/Old\r\nelse\r\necho -e \"AutoPlug directory not found, making one.\"\r\nmkdir autoplug\r\nfi\r\necho -e \"Installing AutoPlug...\"\r\nif [ -f ${AUTOPLUG_JARFILE} ]; then\r\nmv ${AUTOPLUG_JARFILE} ${AUTOPLUG_JARFILE}.old\r\nfi\r\nwget -O AutoPlug-Client.jar https:\/\/raw.githubusercontent.com\/Osiris-Team\/AutoPlug-Releases\/master\/stable-builds\/AutoPlug-Client.jar\r\n# Install Server Files\r\necho -e \"Downloading server.properties\"\r\nwget -O server.properties https:\/\/raw.githubusercontent.com\/parkervcp\/eggs\/master\/minecraft\/java\/server.properties\r\necho -e \"Downloading AutoPlug's general.yml config\"\r\nwget -O general.yml https:\/\/raw.githubusercontent.com\/ImLunaUwU\/PteroPlug\/main\/general.yml\r\necho -e \"Downloading AutoPlug's updater.yml config...\"\r\nwget -O updater.yml https:\/\/raw.githubusercontent.com\/ImLunaUwU\/PteroPlug\/main\/updater.yml\r\necho -e \"Downloading start script...\"\r\nwget -O start.sh https:\/\/raw.githubusercontent.com\/ImLunaUwU\/PteroPlug\/main\/start.sh\r\n\r\n# Minecraft Server Software\r\nif [ ${SERVER_TYPE} = \"purpur\" ]; then # Purpur, my beloved.\r\necho -e \"Downloading Purpur server...\"\r\nwget -O ${SERVER_TYPE}.jar https:\/\/api.purpurmc.org\/v2\/purpur\/${GAME_VERSION}\/latest\/download\r\nelif [ ${SERVER_TYPE} = \"paper\" ]; then # Paper :\/ Just use Purpur, please.\r\necho -e \"Downloading Paper server...\"\r\n# Get the build number and game version of the most recent build\r\nlatest_build=\"$(curl -sX GET https:\/\/papermc.io\/api\/v2\/projects\/paper\/version_group\/${GAME_VERSION}\/builds -H 'accept: application\/json' | jq '.builds [-1].build')\"\r\ncorrect_version=\"$(curl -sX GET https:\/\/papermc.io\/api\/v2\/projects\/paper\/version_group\/${GAME_VERSION}\/builds -H 'accept: application\/json' | jq '.builds [-1].version')\"\r\nfix_version=\"${correct_version%\\\"}\"\r\nfix_version=\"${fix_version#\\\"}\"\r\n# Construct download URL\r\ndownload_url=\"https:\/\/papermc.io\/api\/v2\/projects\/paper\/versions\/\"$fix_version\"\/builds\/\"$latest_build\"\/downloads\/paper-\"$fix_version\"-\"$latest_build\".jar\"\r\n# Download file\r\nwget -O ${SERVER_TYPE}.jar \"$download_url\"\r\nelif [ ${SERVER_TYPE} = \"spigot\" ]; then # Spigot :\/ Again, why not use Purpur?.\r\necho -e \"Downloading Spigot server...\"\r\nwget -O ${SERVER_TYPE}.jar https:\/\/download.getbukkit.org\/spigot\/spigot-${GAME_VERSION}.jar\r\necho -e \"It is recommended that you switch to Purpur. It has better performance and is updated more often.\"\r\nfi",
            "container": "debian:buster-slim",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "AutoPlug Jar File",
            "description": "The name of the jarfile to run AutoPlug.",
            "env_variable": "AUTOPLUG_JARFILE",
            "default_value": "AutoPlug-Client.jar",
            "user_viewable": true,
            "user_editable": false,
            "rules": "required|string|max:20",
            "field_type": "text"
        },
        {
            "name": "Server Type",
            "description": "Must be \"purpur\", \"paper\" or \"spigot\".\r\nIf more server types are needed, please message LunaUwU#6969",
            "env_variable": "SERVER_TYPE",
            "default_value": "purpur",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20",
            "field_type": "text"
        },
        {
            "name": "AutoPlug Server Key",
            "description": "The key of your server (Optional)\r\nOnly needed if you want to use the web panel on https:\/\/autoplug.one\/",
            "env_variable": "SERVER_KEY",
            "default_value": "null",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|max:300",
            "field_type": "text"
        },
        {
            "name": "Game Version",
            "description": "Minecraft Version\r\nFormats:\r\nPurpur, Spigot: 1.x.x\r\nPaper: 1.x",
            "env_variable": "GAME_VERSION",
            "default_value": "1.19.1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:20",
            "field_type": "text"
        },
        {
            "name": "Update Java",
            "description": "Update Java?\r\ntrue\/false",
            "env_variable": "UPDATE_JAVA",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:5",
            "field_type": "text"
        },
        {
            "name": "Update Server",
            "description": "Update Server?\r\ntrue\/false",
            "env_variable": "UPDATE_SERVER",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:5",
            "field_type": "text"
        },
        {
            "name": "Update Plugins",
            "description": "Update Plugins?\r\ntrue\/false",
            "env_variable": "UPDATE_PLUGINS",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:5",
            "field_type": "text"
        },
        {
            "name": "Update Mods",
            "description": "Update Mods?\r\ntrue\/false",
            "env_variable": "UPDATE_MODS",
            "default_value": "false",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:5",
            "field_type": "text"
        },
        {
            "name": "Update AutoPlug",
            "description": "Update AutoPlug?",
            "env_variable": "UPDATE_AUTOPLUG",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|max:5",
            "field_type": "text"
        }
    ]
}